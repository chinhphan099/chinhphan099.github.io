!function(e,t,o){"use strict";function n(t,o){this.element=e(t),this.options=e.extend({},e.fn[s].defaults,this.element.data(),o,this.element.data(s)),this.init()}var s="gmap",a=e("body"),i=e(t),l=[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"poi",elementType:"geometry.stroke",stylers:[{lightness:"1"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"transit.station.bus",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"transit.station.bus",elementType:"labels.text.fill",stylers:[{saturation:"0"},{lightness:"0"},{gamma:"1.00"},{weight:"1"}]},{featureType:"transit.station.bus",elementType:"labels.icon",stylers:[{saturation:"-100"},{weight:"1"},{lightness:"0"}]},{featureType:"transit.station.rail",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"transit.station.rail",elementType:"labels.text.fill",stylers:[{gamma:"1"},{lightness:"40"}]},{featureType:"transit.station.rail",elementType:"labels.icon",stylers:[{saturation:"-100"},{lightness:"30"}]}],r=function(e){this.vars.map&&this.vars.map.setOptions({scrollwheel:e})},p=function(){var t=this;google.maps.event.addDomListener(document.getElementById(this.options.id),"click",function(){r.call(t,!0)}),google.maps.event.addDomListener(document.getElementById(this.options.id).childNodes,"click",function(){r.call(t,!0)}),google.maps.event.addListener(t.vars.map,"mousedown",function(){r.call(t,!0)}),a.on("mousedown."+s,function(o){e(o.target).closest("#"+t.options.id).length||r.call(t,!1)}),i.on("scroll."+s,function(){r.call(t,!1)})},c=function(){var e=this;this.vars.map.addListener("zoom_changed",function(){e.vars.zoomchanged=e.vars.map.getZoom()})},m=function(){var e=this,t=document.getElementById(this.options.input);if(t){var o=new google.maps.places.SearchBox(t);this.vars.map.controls[google.maps.ControlPosition.TOP_LEFT].push(t),this.vars.map.addListener("bounds_changed",function(){o.setBounds(e.vars.map.getBounds())});var n=[];o.addListener("places_changed",function(){var t,s=o.getPlaces(),a=new google.maps.LatLngBounds;0!==s.length&&(n.forEach(function(e){e.setMap(null)}),n=[],s.forEach(function(o,s){if(!o.geometry)return void console.log("Returned place contains no geometry");var i={url:o.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchoPoint:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};n.push(new google.maps.Marker({map:e.vars.map,icon:i,title:o.name,position:o.geometry.location})),t='<strong style="display: block; text-align: center;">'+o.name+"</strong>"+o.formatted_address,google.maps.event.addListener(n[s],"click",function(){e.setCenter(n[s]),e.showInfoWindow(n[s],'<div class="noscrollbar">'+t+"</>")}),o.geometry.viewport?a.union(o.geometry.viewport):a.extend(o.geometry.location)}),c.call(e),e.vars.map.fitBounds(a))})}};n.prototype={init:function(){this.vars={},this.vars.marker=[],this.vars.locations=locations,this.vars.optMap={center:{lat:this.vars.locations[0].lat,lng:this.vars.locations[0].lng},zoom:this.options.zoom[0],styles:l,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.DEFAULT,position:google.maps.ControlPosition.RIGHT_CENTER},panControl:!1,scrollwheel:!1,gestureHandling:"cooperative"},this.initGmap()},initGmap:function(){this.vars.map=new google.maps.Map(document.getElementById(this.options.id),this.vars.optMap),this.setMarkers(),this.listener()},listener:function(){p.call(this),m.call(this),this.changeLocation(this.vars.locations,this.options.initValue)},setMarkers:function(){var t,o=this;this.vars.bound=new google.maps.LatLngBounds,this.vars.infowindow=new google.maps.InfoWindow;for(var n=0,s=this.vars.locations.length;s>n;++n)o.vars.icon={url:o.vars.locations[n].marker||o.options.icon},this.vars.bound.extend(new google.maps.LatLng(o.vars.locations[n].lat,o.vars.locations[n].lng)),t=new google.maps.LatLng(o.vars.locations[n].lat,o.vars.locations[n].lng),o.vars.marker[n]=new google.maps.Marker({position:t,title:o.vars.locations[n].name,map:o.vars.map,icon:o.vars.icon,animation:google.maps.Animation.DROP}),google.maps.event.addListener(o.vars.marker[n],"click",function(t,n){return function(){c.call(o),o.setCenter(t),o.showInfoWindow(t,n),e("#"+o.options.dropdown).val(t.title),e("#"+o.options.dropdown).closest("[data-select]").addClass("selected").find("span").html(t.title)}}(o.vars.marker[n],this.vars.locations[n].mess));this.boundAllPosition()},boundAllPosition:function(){this.vars.map.setCenter(this.vars.bound.getCenter()),this.vars.map.fitBounds(this.vars.bound)},changeLocation:function(t,n){for(var a=this,i="",l=0,r=t.length;r>l;++l)i=n===t[l].name?'<option value="'+t[l].name+'" selected="selected">'+t[l].name+"</option>":'<option value="'+t[l].name+'">'+t[l].name+"</option>",e("#"+this.options.dropdown).append(i);e("#"+this.options.dropdown).on("change."+s,function(){for(var t=e(this).val(),n=0,s=a.vars.locations.length;s>n;++n)t===a.vars.locations[n].name&&google.maps.event.trigger(a.vars.marker[n],"click");t||(a.boundAllPosition(),a.vars.infowindow.close(),a.vars.zoomchanged=o)}),google.maps.event.addListenerOnce(this.vars.map,"idle",function(){e("#"+a.options.dropdown).change()})},setCenter:function(e){var t=this.options.zoom[1];this.vars.zoomchanged&&(t=this.vars.zoomchanged),this.vars.map.setZoom(t),this.vars.map.panTo(e.getPosition())},showInfoWindow:function(e,t){this.vars.infowindow.setContent(t),this.vars.infowindow.open(this.vars.map,e)}},e.fn[s]=function(t,o){return this.each(function(){var a=e.data(this,s);a?a[t]&&a[t](o):e.data(this,s,new n(this,t))})},e.fn[s].defaults={},e(function(){e("[data-"+s+"]")[s]({icon:"images/pink-marker.png"})})}(jQuery,window);