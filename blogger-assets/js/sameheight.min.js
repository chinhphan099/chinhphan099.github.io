!function(t,i,e){"use strict";function n(i,e){this.element=t(i),this.options=t.extend({},t.fn[h].defaults,this.element.data(),e),this.init()}var h="sameheight",s=t(i),a="onorientationchange"in i?"orientationchange.resize"+h:"resize.resize"+h;n.prototype={init:function(){this.parent=this.element.find(this.options.parent),this.childs=this.element.find(this.options.child),this.initialize(),s.off(a).on(a,function(){t("[data-"+h+"]")[h]("initialize")})},initialize:function(){this.element.find("img").length?this.checkImgLoad():this.setSameHeight()},checkImgLoad:function(){var i=this,e=0,n=this.element.find("img").length;this.element.find("img").each(function(){var h=t(this).attr("src");t("<img />").attr("src",h).css("display","none").load(function(){++e,e===n&&t.isFunction(i.setSameHeight)&&i.setSameHeight()}).error(function(){++e,e===n&&t.isFunction(i.setSameHeight)&&i.setSameHeight()})})},setSameHeight:function(){var i=Math.floor(this.element.width()/this.parent.width());if(this.parent.css("height","auto"),this.childs.css("height","auto"),i>1)for(var n=0,s=this.parent.length;s>n;n+=i){var a=this.parent.slice(n,n+i),o=a.length,c="",r=0,d=0,f={};a.each(function(i){d=i,t(this).find("[data-child]").each(function(){c=t(this).attr("data-child"),(i%o===0||f[c]===e)&&(f[c]=0),f[c]=Math.max(f[c],t(this).outerHeight())})}),d===o-1&&(a.each(function(){for(var i in f)t(this).find('[data-child="'+i+'"]').css("height",f[i]);r=Math.max(r,t(this).outerHeight())}),"no4parent"!==this.options[h]&&a.css("height",r))}},destroy:function(){this.parent.css("height","auto"),this.childs.css("height","auto"),s.off(a),t.removeData(this.element[0],h)}},t.fn[h]=function(i,e){return this.each(function(){var s=t.data(this,h);s?s[i]&&s[i](e):t.data(this,h,new n(this,i))})},t.fn[h].defaults={parent:"[data-parent]",child:"[data-child]"},t(function(){t("[data-"+h+"]")[h]()})}(jQuery,window);